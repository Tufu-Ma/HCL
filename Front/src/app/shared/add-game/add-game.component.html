<app-header-navbar></app-header-navbar>

<div class="page-wrapper">
  <div class="page-box">
    <!-- Title -->
    <div class="header mb-4 text-center">
      <h2 class="main-title">‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°‡πÉ‡∏´‡∏°‡πà</h2>
      <p class="sub-title">‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡∏° ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î ‚Äú‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏Å‡∏°‚Äù ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á</p>
    </div>

    <!-- Add Game Form -->
    <div class="card shadow-sm mb-5 p-4">
      <form [formGroup]="form" (ngSubmit)="submit()">
        <div class="form-grid">
          <div class="form-section">
            <label class="form-label">‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡∏° <span class="text-danger">*</span></label>
            <input type="text" formControlName="name" class="form-control" placeholder="‡πÄ‡∏ä‡πà‡∏ô PUBG" />
            <div class="form-text">‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡∏°‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ö‡∏ô‡∏Å‡∏≤‡∏£‡πå‡∏î</div>

            <label class="form-label mt-3">Slug</label>
            <input type="text" formControlName="slug" class="form-control" placeholder="‡πÄ‡∏ä‡πà‡∏ô pubg" />
            <div class="form-text">‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏™‡∏±‡πâ‡∏ô (‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö)</div>

            <label class="form-label mt-3">Cover URL</label>
            <input type="url" formControlName="coverurl" class="form-control" placeholder="https://..." />
            <div class="form-text">‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏£‡∏π‡∏õ‡∏™‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏µ‡πà‡∏¢‡∏°‡∏à‡∏±‡∏ï‡∏∏‡∏£‡∏±‡∏™</div>

            <label class="form-label mt-3">Description</label>
            <textarea formControlName="description" class="form-control" rows="3" placeholder="‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏™‡∏±‡πâ‡∏ô ‡πÜ"></textarea>

            <div class="d-flex gap-2 mt-4">
              <button class="btn btn-primary" type="submit" [disabled]="form.invalid || submitting">
                üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏Å‡∏°
              </button>
              <button type="button" class="btn btn-outline-secondary" (click)="form.reset()">‡∏•‡πâ‡∏≤‡∏á‡∏ü‡∏≠‡∏£‡πå‡∏°</button>
            </div>
          </div>

          <div class="preview-section text-center">
            <label class="form-label">‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏†‡∏≤‡∏û‡∏õ‡∏Å</label>
            <div class="preview-box">
              <img
                [src]="form.value.coverurl || 'assets/testBG.jpg'"
                (error)="onImgError($event, 'assets/testBG.jpg')"
                alt="preview"
              />
            </div>
          </div>
        </div>
      </form>
    </div>

    <!-- Game List -->
    <div class="d-flex align-items-center justify-content-between mb-2">
      <h3 class="sub-title text-light mb-0">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
      <span class="text-light small">{{ games.length || 0 }} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</span>
    </div>

    <div *ngIf="!games.length" class="card shadow-sm text-center py-5">
      <h5 class="mb-1">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏Å‡∏°</h5>
      <p class="text-muted mb-0">‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°‡πÅ‡∏£‡∏Å‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏à‡∏≤‡∏Å‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢</p>
    </div>

    <!-- Grid of Cards -->
<div class="row g-3 mt-2 cards-grid">
  <div class="col-6 col-md-4 col-lg-3" *ngFor="let g of games; trackBy: trackById">
    <div class="card game-card compact h-100" (click)="goDetail(g)" style="cursor:pointer;">
      <div class="thumb">
        <img [src]="g.coverurl || 'assets/testBG.jpg'"
             (error)="onImgError($event, 'assets/testBG.jpg')" alt="cover">
        <span class="badge soft state" [class.bg-success]="g.active" [class.bg-secondary]="!g.active">
          {{ g.active ? 'Active' : 'Inactive' }}
        </span>
      </div>

      <div class="card-body p-3">
        <h6 class="title text-truncate mb-1">{{ g.name }}</h6>
        <div class="meta small text-truncate"><strong>Slug:</strong> {{ g.slug || '-' }}</div>
        <div class="desc small text-truncate-2 mt-2">{{ g.description || '‚Äî' }}</div>
      </div>

      <div class="card-footer bg-transparent pt-0 pb-3 border-0">
        <div class="d-flex justify-content-between gap-2">
          <button type="button" class="btn btn-xxs btn-outline-warning"
                  (click)="toggleActive(g); $event.stopPropagation()">
            {{ g.active ? '‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô' : '‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô' }}
          </button>
          <button type="button" class="btn btn-xxs btn-outline-danger"
                  (click)="deleteGame(g); $event.stopPropagation()">
            ‡∏•‡∏ö
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

  </div>
</div>
