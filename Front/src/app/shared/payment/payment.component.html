<app-header-navbar></app-header-navbar>

<div class="container">
  <div class="row">
    <div class="col-10 offset-1 page-box">
      
      <!-- ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏´‡∏ô‡πâ‡∏≤‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô -->
      <div class="header-section">
        <h2 class="main-title">‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô</h2>
        <p class="sub-title">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô‡∏™‡∏∏‡∏î‡∏Ñ‡∏∏‡πâ‡∏°</p>
        <div class="header-decoration">
          <div class="glow-line"></div>
        </div>
      </div>

      <!-- ‡∏Å‡∏£‡∏≠‡∏ö‡∏´‡∏•‡∏±‡∏Å -->
      <div class="payment-container">
        
        <!-- ‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô -->
        <div class="promotion-summary" *ngIf="selectedPromotion">
          <h3 class="summary-title">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ã‡∏∑‡πâ‡∏≠</h3>
          <div class="promotion-card-summary">
            <div class="image-container">
              <img [src]="selectedPromotion.imageUrl" [alt]="selectedPromotion.title" class="promotion-image-small">
              <div class="image-glow"></div>
            </div>
            <div class="promotion-details">
              <h4 class="promotion-name">{{ selectedPromotion.title }}</h4>
              <p class="promotion-subtitle-small">{{ selectedPromotion.subtitle }}</p>
              
              <!-- ‡∏£‡∏≤‡∏Ñ‡∏≤ -->
              <div class="price-summary">
                <span class="current-price-large">{{ selectedPromotion.price }}</span>
                <span class="original-price-small" *ngIf="selectedPromotion.originalPrice">{{ selectedPromotion.originalPrice }}</span>
                <span class="savings-amount" *ngIf="selectedPromotion.originalPrice">
                  ‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î {{ calculateSavings(selectedPromotion.originalPrice, selectedPromotion.price) }} ‡∏ö‡∏≤‡∏ó!
                </span>
              </div>

              <!-- ‡∏Ç‡∏≠‡∏á‡πÅ‡∏ñ‡∏° -->
              <div class="bonus-summary" *ngIf="selectedPromotion.bonusItems">
                <div class="bonus-title-small">üéÅ ‡∏Ç‡∏≠‡∏á‡πÅ‡∏ñ‡∏°‡∏û‡∏¥‡πÄ‡∏®‡∏©</div>
                <ul class="bonus-list-small">
                  <li *ngFor="let bonus of selectedPromotion.bonusItems.slice(0, 3)" class="bonus-item-animate">{{ bonus }}</li>
                  <li *ngIf="selectedPromotion.bonusItems.length > 3" class="more-items">
                    <span class="sparkle"></span> ‡πÅ‡∏•‡∏∞‡∏≠‡∏µ‡∏Å {{ selectedPromotion.bonusItems.length - 3 }} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡πÄ‡∏®‡∏©...
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <!-- ‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô -->
        <div class="payment-form">
          <h3 class="form-title">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</h3>
          
          <form (ngSubmit)="onPayment()">
            <!-- ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô -->
            <div class="form-group">
              <label>‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</label>
              <div class="payment-methods">
                <div class="payment-method-item">
                  <input 
                    type="radio" 
                    id="promptpay" 
                    value="promptpay"
                    [(ngModel)]="paymentData.paymentMethod"
                    name="paymentMethod">
                  <label for="promptpay">
                    <span class="payment-icon">üí≥</span>
                    PromptPay
                  </label>
                </div>
                <div class="payment-method-item">
                  <input 
                    type="radio" 
                    id="truemoney" 
                    value="truemoney"
                    [(ngModel)]="paymentData.paymentMethod"
                    name="paymentMethod">
                  <label for="truemoney">
                    <span class="payment-icon">üì±</span>
                    TrueMoney
                  </label>
                </div>
              </div>
            </div>

            <!-- QR Code Section -->
            <div class="qr-section" *ngIf="paymentData.paymentMethod && !isPaid">
              <h4 class="qr-title">‡∏™‡πÅ‡∏Å‡∏ô QR Code ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</h4>
              <div class="qr-container">
                <img [src]="paymentImage" [alt]="methodLabel + ' QR Code'" class="qr-image">
                <div class="payment-amount">{{ selectedPromotion?.price }}</div>
              </div>
              <div class="payment-note">
                <p><i class="fas fa-info-circle"></i> ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 1-2 ‡∏ô‡∏≤‡∏ó‡∏µ</p>
              </div>
            </div>

            <!-- Success Message -->
            <div class="success-message" *ngIf="isPaid">
              <div class="success-icon">‚úÖ</div>
              <h3>‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!</h3>
              <div class="order-id">‡∏£‡∏´‡∏±‡∏™‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠: {{ orderId }}</div>
              <p>‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ üôèüèª</p>
            </div>

            <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£ -->
            <div class="action-buttons">
              <button type="button" class="btn-back" (click)="goBack()">
                <span class="btn-icon">‚Üê</span>
                <span>‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô</span>
              </button>
              <button 
                type="button" 
                class="btn-pay" 
                (click)="onPayment()"
                [disabled]="!paymentData.paymentMethod || isPaying || isPaid"
                [class.loading]="isPaying"
                [class.success]="isPaid">
                <span class="btn-text" *ngIf="!isPaying && !isPaid">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</span>
                <span class="btn-text" *ngIf="isPaying">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•...</span>
                <span class="btn-text" *ngIf="isPaid">‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</span>
                <span class="btn-shine"></span>
                <div class="btn-glow"></div>
              </button>
            </div>
          </form>
        </div>

      </div>

    </div>
  </div>
</div>

<app-footer-navbar></app-footer-navbar>