<app-header-navbar></app-header-navbar>

<div class="game-container" *ngIf="sub; else notfound">
  <div class="game-header">
    <div class="game-banner">
      <img [src]="sub!.banner" [alt]="sub!.name" />
    </div>
    <div class="game-info">
      <h1>{{ sub!.name }}</h1>
      <p class="game-description">ต่ออายุสมาชิก เลือกแพ็กเกจและช่องทางชำระเงิน</p>
    </div>
  </div>

  <div class="topup-section">
    <div class="topup-card">
      <h2>เลือกแพ็กเกจ</h2>
      <div class="amount-selection">
        <h3>เลือกแพ็กเกจ</h3>
        <div class="amount-grid">
          <button *ngFor="let p of sub!.plans" class="amount-option"
                  [class.selected]="selectedAmount === p.amount"
                  (click)="selectAmount(p)">
            <span class="vp">{{ p.label }}</span>
            <span class="price">{{ p.amount | number:'1.0-0' }} บาท</span>
          </button>
        </div>
      </div>

      <div class="payment-method">
        <h3>เลือกช่องทางการชำระเงิน</h3>
        <div class="payment-options">
          <button *ngFor="let m of paymentMethods" class="payment-option"
                  [class.selected]="selectedPayment === m.id"
                  (click)="selectPayment(m.id)">
            <img [src]="m.icon" [alt]="m.name">
            <span>{{ m.name }}</span>
          </button>
        </div>
      </div>

      <button class="confirm" [disabled]="!selectedAmount || !selectedPayment" (click)="confirm()">ยืนยันการสั่งซื้อโค้ด</button>
    </div>

    <div class="instruction-card">
      <h2>หมายเหตุ</h2>
      <ol>
        <li>โค้ดเป็นดิจิทัล (Gift Code) ส่งให้หลังชำระเงิน</li>
        <li>สามารถนำโค้ดไป Redeem ในแอปบริการนั้นๆ ได้ทันที</li>
      </ol>
    </div>
  </div>
</div>

<ng-template #notfound>
  <div class="notfound">ไม่พบบริการที่เลือก</div>
</ng-template>

<app-footer-navbar></app-footer-navbar>